webpackJsonp([1],{YieJ:function(e,s){},r5vT:function(e,s){},t9WF:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=t("Dd8w"),o=t.n(i),n=t("NYxO"),a=t("Cpzh"),r={name:"CountDownBtn",props:{value:{type:String,default:"点击"},seconds:{type:Number,default:60}},data:function(){return{isCountdown:!1,countTime:0,noMoreClick:!1}},methods:{btnClick:function(){this.noMoreClick||this.$emit("doClick")},doCountdown:function(){if(window.localStorage){var e=(new Date).getTime()+1e3*this.seconds;localStorage.setItem("futureTime",e.toString()),this.checkCountdown()}},checkCountdown:function(){var e=this;if(window.localStorage){var s=localStorage.getItem("futureTime");if(s){var t=(new Date).getTime();if(s-t<=0)this.isCountdown=!1;else{this.isCountdown=!0,this.countTime=(s-t)/1e3-(s-t)/1e3%1;var i=setInterval(function(){t=(new Date).getTime(),(s=localStorage.getItem("futureTime"))-t>0?e.countTime=(s-t)/1e3-(s-t)/1e3%1:(e.isCountdown=!1,e.countTime=0,clearInterval(i))},800)}}else this.isCountdown=!1}}},created:function(){this.checkCountdown()}},c={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("span",[e.isCountdown?t("span",[e._v("\n    "+e._s("倒计时:"+e.countTime+"s")+"\n  ")]):t("span",{on:{click:function(s){return s.stopPropagation(),e.btnClick(s)}}},[e._v("\n    "+e._s(e.value)+"\n  ")])])},staticRenderFns:[]};var l=t("VU/8")(r,c,!1,function(e){t("r5vT")},"data-v-29401c69",null).exports,d=t("CXu2"),u=t("fflv"),g={name:"LoginView",components:{CountDownBtn:l},data:function(){return{isLoginView:!0,hasSentEmail:!1,isAutoLogin:!1,isPasswordVisible:!1,isLoginBackgroundLoaded:!1,logIn:{username:"",password:""},register:{username:"",password:"",email:"",vericode:""},countdown:0}},methods:{toLoginView:function(){this.isLoginView||(this.isLoginView=!0)},toRegisterView:function(){this.isLoginView&&(this.isLoginView=!1)},autoLoginBtnClick:function(){this.isAutoLogin=!this.isAutoLogin},prdVisiIconClick:function(){this.isPasswordVisible=!this.isPasswordVisible},doLogin:function(){var e=this;Object(u.j)(this.logIn,this.isAutoLogin).then(function(s){alert(s.data.message),200===s.data.code&&s.data.data&&(Object(d.d)(s.data.data.token),Object(d.c)(e.isAutoLogin),e.$store.commit(a.j,e.isAutoLogin),e.$store.commit(a.m,s.data.data.user),e.$router.push("/"+s.data.data.user.userId))})},doRegister:function(){this.register.email.trim()||alert("邮箱不得为空"),this.register.username.trim()||alert("用户名不得为空"),this.register.password.trim()||alert("密码不得为空"),Object(u.l)(this.register).then(function(e){alert(e.data.message)})},goMainPage:function(){this.isLogIn?this.$router.push("/"+this.user.userId):this.$router.push("/"+this.defaultUserId)},sendEmail:function(){var e=this;this.register.email&&this.register.email.trim()?(this.$refs.countdown.noMoreClick=!0,Object(u.m)(this.register.email).then(function(s){s.data&&alert(s.data.message),e.$refs.countdown.noMoreClick=!1,s.data.data&&e.$refs.countdown.doCountdown()}).catch(function(s){e.$refs.countdown.noMoreClick=!1})):alert("请输入邮箱")}},computed:o()({inputContainerStyle:function(){return this.isLoginView?{}:{"margin-left":"-100%"}},isShowPassword:function(){return this.isPasswordVisible?"text":"password"}},Object(n.b)(["isLogIn","defaultUserId","user"])),created:function(){}},m={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"login"},[t("div",{staticClass:"home-btn",on:{click:e.goMainPage}},[e._v("主站")]),e._v(" "),t("transition",{attrs:{name:"login-background-on"}},[t("img",{directives:[{name:"show",rawName:"v-show",value:e.isLoginBackgroundLoaded,expression:"isLoginBackgroundLoaded"}],staticClass:"login-background",attrs:{src:"http://r.photo.store.qq.com/psc?/V53RZdap02olQB1qJRDI0kxlEl0h2BPA/45NBuzDIW489QBoVep5mcRmJJ6swkxuDdj5W8*udZhOrZdj56OcM2z.Y7SzeMsAvin*GfbBCBTaToKhpue*u5huGsWa.5KVYyr9b5YUVRzQ!/r"},on:{load:function(s){e.isLoginBackgroundLoaded=!0}}})]),e._v(" "),t("div",{staticClass:"container"},[t("div",{staticClass:"select"},[t("div",{staticClass:"login-view-btn",on:{click:e.toLoginView}},[e._v("\n        登录\n        "),t("svg",{directives:[{name:"show",rawName:"v-show",value:e.isLoginView,expression:"isLoginView"}],staticClass:"icon"},[t("use",{attrs:{"xlink:href":"#iconmao"}})])]),e._v(" "),t("div",{staticClass:"register-view-btn",on:{click:e.toRegisterView}},[e._v("\n        注册\n        "),t("svg",{directives:[{name:"show",rawName:"v-show",value:!e.isLoginView,expression:"!isLoginView"}],staticClass:"icon"},[t("use",{attrs:{"xlink:href":"#iconmao"}})])])]),e._v(" "),t("div",{staticClass:"input-container"},[t("div",{staticClass:"login-input-group",style:e.inputContainerStyle},[e.isLogIn?t("div",{staticClass:"has-login"},[t("h3",[e._v("\n            您已经登录了啦~~\n          ")])]):t("div",[t("div",{staticClass:"account"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.logIn.username,expression:"logIn.username"}],attrs:{type:"text",autocomplete:"off",placeholder:"用户名/邮箱",size:"26",maxlength:"20"},domProps:{value:e.logIn.username},on:{input:function(s){s.target.composing||e.$set(e.logIn,"username",s.target.value)}}})]),e._v(" "),t("div",{staticClass:"password"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.logIn.password,expression:"logIn.password"}],attrs:{type:"password",autoComplete:"new-password",placeholder:"密码",size:"26",maxlength:"20"},domProps:{value:e.logIn.password},on:{input:function(s){s.target.composing||e.$set(e.logIn,"password",s.target.value)}}})]),e._v(" "),t("div",{staticClass:"login-option"},[t("span",{staticClass:"autologin-btn",on:{click:e.autoLoginBtnClick}},[e._v("自动登录\n          "),t("svg",{directives:[{name:"show",rawName:"v-show",value:!e.isAutoLogin,expression:"!isAutoLogin"}],staticClass:"icon"},[t("use",{attrs:{"xlink:href":"#iconxuanzekuang"}})]),e._v(" "),t("svg",{directives:[{name:"show",rawName:"v-show",value:e.isAutoLogin,expression:"isAutoLogin"}],staticClass:"icon"},[t("use",{attrs:{"xlink:href":"#iconxuanzekuang1"}})])]),e._v(" "),t("span",{staticClass:"login-btn",on:{click:e.doLogin}},[e._v("确认")])])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoginView,expression:"!isLoginView"}],staticClass:"register-input-group"},[t("div",{staticClass:"account"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.register.username,expression:"register.username"}],attrs:{type:"text",autocomplete:"off",placeholder:"用户名:长度3~10",size:"26",maxlength:"20"},domProps:{value:e.register.username},on:{input:function(s){s.target.composing||e.$set(e.register,"username",s.target.value)}}})]),e._v(" "),t("div",{staticClass:"password"},["checkbox"===e.isShowPassword?t("input",{directives:[{name:"model",rawName:"v-model",value:e.register.password,expression:"register.password"}],attrs:{autoComplete:"new-password",placeholder:"密码:长度8~20数字字母",size:"22",maxlength:"20",type:"checkbox"},domProps:{checked:Array.isArray(e.register.password)?e._i(e.register.password,null)>-1:e.register.password},on:{change:function(s){var t=e.register.password,i=s.target,o=!!i.checked;if(Array.isArray(t)){var n=e._i(t,null);i.checked?n<0&&e.$set(e.register,"password",t.concat([null])):n>-1&&e.$set(e.register,"password",t.slice(0,n).concat(t.slice(n+1)))}else e.$set(e.register,"password",o)}}}):"radio"===e.isShowPassword?t("input",{directives:[{name:"model",rawName:"v-model",value:e.register.password,expression:"register.password"}],attrs:{autoComplete:"new-password",placeholder:"密码:长度8~20数字字母",size:"22",maxlength:"20",type:"radio"},domProps:{checked:e._q(e.register.password,null)},on:{change:function(s){return e.$set(e.register,"password",null)}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.register.password,expression:"register.password"}],attrs:{autoComplete:"new-password",placeholder:"密码:长度8~20数字字母",size:"22",maxlength:"20",type:e.isShowPassword},domProps:{value:e.register.password},on:{input:function(s){s.target.composing||e.$set(e.register,"password",s.target.value)}}}),e._v(" "),t("div",{staticClass:"password-visibility-icon",on:{click:e.prdVisiIconClick}},[t("svg",{directives:[{name:"show",rawName:"v-show",value:!e.isPasswordVisible,expression:"!isPasswordVisible"}],staticClass:"icon"},[t("use",{attrs:{"xlink:href":"#iconyanjing"}})]),e._v(" "),t("svg",{directives:[{name:"show",rawName:"v-show",value:e.isPasswordVisible,expression:"isPasswordVisible"}],staticClass:"icon"},[t("use",{attrs:{"xlink:href":"#iconyanjing1"}})])])]),e._v(" "),t("div",{staticClass:"email"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.register.email,expression:"register.email"}],attrs:{type:"text",autocomplete:"off",placeholder:"邮箱",size:"26",maxlength:"30"},domProps:{value:e.register.email},on:{input:function(s){s.target.composing||e.$set(e.register,"email",s.target.value)}}})]),e._v(" "),t("div",{staticClass:"verification-code"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.register.vericode,expression:"register.vericode"}],attrs:{type:"text",autocomplete:"off",placeholder:"验证码",maxlength:"6",size:"10"},domProps:{value:e.register.vericode},on:{input:function(s){s.target.composing||e.$set(e.register,"vericode",s.target.value)}}}),e._v(" "),e.hasSentEmail?t("span",[e._v("已发送,倒计时:"+e._s(e.countdown))]):t("span",{staticClass:"sendemain-btn"},[t("count-down-btn",{ref:"countdown",staticClass:"countdonw-btn",attrs:{value:"发送"},on:{doClick:e.sendEmail}})],1)]),e._v(" "),t("div",{staticClass:"register-option"},[t("span",{staticClass:"register-btn",on:{click:e.doRegister}},[e._v("提交")])])])])])],1)},staticRenderFns:[]};var v=t("VU/8")(g,m,!1,function(e){t("YieJ")},"data-v-411eda29",null);s.default=v.exports}});